# terraform-azure-mcaf-network
Terraform module to generate virtual network, subnet, dns_zones.

<!-- BEGIN_TF_DOCS -->
## Requirements

| Name | Version |
|------|---------|
| <a name="requirement_terraform"></a> [terraform](#requirement\_terraform) | >= 1.8 |
| <a name="requirement_azurerm"></a> [azurerm](#requirement\_azurerm) | >= 4 |

## Providers

| Name | Version |
|------|---------|
| <a name="provider_azurerm"></a> [azurerm](#provider\_azurerm) | >= 4 |

## Modules

No modules.

## Resources

| Name | Type |
|------|------|
| [azurerm_nat_gateway.this](https://registry.terraform.io/providers/hashicorp/azurerm/latest/docs/resources/nat_gateway) | resource |
| [azurerm_nat_gateway_public_ip_association.this](https://registry.terraform.io/providers/hashicorp/azurerm/latest/docs/resources/nat_gateway_public_ip_association) | resource |
| [azurerm_network_security_group.additional](https://registry.terraform.io/providers/hashicorp/azurerm/latest/docs/resources/network_security_group) | resource |
| [azurerm_network_security_group.azbastion](https://registry.terraform.io/providers/hashicorp/azurerm/latest/docs/resources/network_security_group) | resource |
| [azurerm_network_security_group.simple](https://registry.terraform.io/providers/hashicorp/azurerm/latest/docs/resources/network_security_group) | resource |
| [azurerm_network_security_group.this](https://registry.terraform.io/providers/hashicorp/azurerm/latest/docs/resources/network_security_group) | resource |
| [azurerm_network_security_rule.additional](https://registry.terraform.io/providers/hashicorp/azurerm/latest/docs/resources/network_security_rule) | resource |
| [azurerm_network_security_rule.allow_https_in_from_vnets](https://registry.terraform.io/providers/hashicorp/azurerm/latest/docs/resources/network_security_rule) | resource |
| [azurerm_network_security_rule.allow_https_out_to_vnets](https://registry.terraform.io/providers/hashicorp/azurerm/latest/docs/resources/network_security_rule) | resource |
| [azurerm_network_security_rule.azbastion](https://registry.terraform.io/providers/hashicorp/azurerm/latest/docs/resources/network_security_rule) | resource |
| [azurerm_network_security_rule.default](https://registry.terraform.io/providers/hashicorp/azurerm/latest/docs/resources/network_security_rule) | resource |
| [azurerm_network_security_rule.deny_any_any_any_in](https://registry.terraform.io/providers/hashicorp/azurerm/latest/docs/resources/network_security_rule) | resource |
| [azurerm_network_security_rule.deny_any_any_any_out](https://registry.terraform.io/providers/hashicorp/azurerm/latest/docs/resources/network_security_rule) | resource |
| [azurerm_private_dns_zone.this](https://registry.terraform.io/providers/hashicorp/azurerm/latest/docs/resources/private_dns_zone) | resource |
| [azurerm_private_dns_zone_virtual_network_link.this](https://registry.terraform.io/providers/hashicorp/azurerm/latest/docs/resources/private_dns_zone_virtual_network_link) | resource |
| [azurerm_public_ip.this](https://registry.terraform.io/providers/hashicorp/azurerm/latest/docs/resources/public_ip) | resource |
| [azurerm_resource_group.this](https://registry.terraform.io/providers/hashicorp/azurerm/latest/docs/resources/resource_group) | resource |
| [azurerm_subnet.this](https://registry.terraform.io/providers/hashicorp/azurerm/latest/docs/resources/subnet) | resource |
| [azurerm_subnet_nat_gateway_association.this](https://registry.terraform.io/providers/hashicorp/azurerm/latest/docs/resources/subnet_nat_gateway_association) | resource |
| [azurerm_subnet_network_security_group_association.additional](https://registry.terraform.io/providers/hashicorp/azurerm/latest/docs/resources/subnet_network_security_group_association) | resource |
| [azurerm_subnet_network_security_group_association.azbastion](https://registry.terraform.io/providers/hashicorp/azurerm/latest/docs/resources/subnet_network_security_group_association) | resource |
| [azurerm_subnet_network_security_group_association.simple](https://registry.terraform.io/providers/hashicorp/azurerm/latest/docs/resources/subnet_network_security_group_association) | resource |
| [azurerm_subnet_network_security_group_association.this](https://registry.terraform.io/providers/hashicorp/azurerm/latest/docs/resources/subnet_network_security_group_association) | resource |
| [azurerm_virtual_network.this](https://registry.terraform.io/providers/hashicorp/azurerm/latest/docs/resources/virtual_network) | resource |

## Inputs

| Name | Description | Type | Default | Required |
|------|-------------|------|---------|:--------:|
| <a name="input_vnet_name"></a> [vnet\_name](#input\_vnet\_name) | The name of the virtual network. | `string` | n/a | yes |
| <a name="input_azure_bastion_security_rules"></a> [azure\_bastion\_security\_rules](#input\_azure\_bastion\_security\_rules) | n/a | <pre>map(object({<br>    access                                     = string<br>    name                                       = string<br>    direction                                  = string<br>    priority                                   = number<br>    protocol                                   = string<br>    description                                = optional(string)<br>    destination_address_prefix                 = optional(string, null)<br>    destination_address_prefixes               = optional(set(string), null)<br>    destination_application_security_group_ids = optional(set(string), null)<br>    destination_port_range                     = optional(string, null)<br>    destination_port_ranges                    = optional(set(string), null)<br>    source_address_prefix                      = optional(string, null)<br>    source_address_prefixes                    = optional(set(string), null)<br>    source_application_security_group_ids      = optional(set(string), null)<br>    source_port_range                          = optional(string, null)<br>    source_port_ranges                         = optional(set(string), null)<br>    timeouts = optional(object({<br>      create = optional(string, "30")<br>      delete = optional(string, "30")<br>      read   = optional(string, "5")<br>      update = optional(string, "30")<br>    }))<br>  }))</pre> | <pre>{<br>  "Allow-DataPlane-in-from-VirtualNetwork": {<br>    "access": "Allow",<br>    "description": "Allow DataPlane traffic from the VirtualNetwork",<br>    "destination_address_prefix": "VirtualNetwork",<br>    "destination_port_range": "8080",<br>    "direction": "Inbound",<br>    "name": "Allow-DataPlane-in-from-VirtualNetwork",<br>    "priority": 102,<br>    "protocol": "Tcp",<br>    "source_address_prefix": "VirtualNetwork",<br>    "source_port_range": "*"<br>  },<br>  "Allow-DataPlane-in-from-VirtualNetwork-5701": {<br>    "access": "Allow",<br>    "description": "Allow DataPlane traffic from the VirtualNetwork on port 5701",<br>    "destination_address_prefix": "VirtualNetwork",<br>    "destination_port_range": "5701",<br>    "direction": "Inbound",<br>    "name": "Allow-DataPlane-in-from-VirtualNetwork-5701",<br>    "priority": 103,<br>    "protocol": "Tcp",<br>    "source_address_prefix": "VirtualNetwork",<br>    "source_port_range": "*"<br>  },<br>  "Allow-DataPlane-out-to-VirtualNetwork-5701": {<br>    "access": "Allow",<br>    "description": "Allow DataPlane traffic to the VirtualNetwork on port 5701",<br>    "destination_address_prefix": "VirtualNetwork",<br>    "destination_port_range": "5701",<br>    "direction": "Outbound",<br>    "name": "Allow-DataPlane-out-to-VirtualNetwork-5701",<br>    "priority": 203,<br>    "protocol": "Tcp",<br>    "source_address_prefix": "*",<br>    "source_port_range": "*"<br>  },<br>  "Allow-DataPlane-out-to-VirtualNetwork-8080": {<br>    "access": "Allow",<br>    "description": "Allow DataPlane traffic to the VirtualNetwork on port 8080",<br>    "destination_address_prefix": "VirtualNetwork",<br>    "destination_port_range": "8080",<br>    "direction": "Outbound",<br>    "name": "Allow-DataPlane-out-to-VirtualNetwork-8080",<br>    "priority": 202,<br>    "protocol": "Tcp",<br>    "source_address_prefix": "*",<br>    "source_port_range": "*"<br>  },<br>  "Allow-Http-out-to-Internet": {<br>    "access": "Allow",<br>    "description": "Allow HTTP traffic to the Internet",<br>    "destination_address_prefix": "Internet",<br>    "destination_port_range": "80",<br>    "direction": "Outbound",<br>    "name": "Allow-Http-out-to-Internet",<br>    "priority": 205,<br>    "protocol": "Tcp",<br>    "source_address_prefix": "*",<br>    "source_port_range": "*"<br>  },<br>  "Allow-Https-in-from-AzureLoadBalancer": {<br>    "access": "Allow",<br>    "description": "Allow HTTPS traffic from the AzureLoadBalancer",<br>    "destination_address_prefix": "*",<br>    "destination_port_range": "443",<br>    "direction": "Inbound",<br>    "name": "Allow-Https-in-from-AzureLoadBalancer",<br>    "priority": 104,<br>    "protocol": "Tcp",<br>    "source_address_prefix": "AzureLoadBalancer",<br>    "source_port_range": "*"<br>  },<br>  "Allow-Https-in-from-GatewayManager": {<br>    "access": "Allow",<br>    "description": "Allow HTTPS traffic from the GatewayManager",<br>    "destination_address_prefix": "*",<br>    "destination_port_range": "443",<br>    "direction": "Inbound",<br>    "name": "Allow-Https-in-from-GatewayManager",<br>    "priority": 101,<br>    "protocol": "Tcp",<br>    "source_address_prefix": "GatewayManager",<br>    "source_port_range": "*"<br>  },<br>  "Allow-Https-in-from-Internet": {<br>    "access": "Allow",<br>    "description": "Allow HTTPS traffic from the Internet",<br>    "destination_address_prefix": "*",<br>    "destination_port_range": "443",<br>    "direction": "Inbound",<br>    "name": "Allow-Https-in-from-Internet",<br>    "priority": 100,<br>    "protocol": "Tcp",<br>    "source_address_prefix": "Internet",<br>    "source_port_range": "*"<br>  },<br>  "Allow-Https-out-to-AzureCloud": {<br>    "access": "Allow",<br>    "description": "Allow HTTPS traffic to the AzureCloud",<br>    "destination_address_prefix": "AzureCloud",<br>    "destination_port_range": "443",<br>    "direction": "Outbound",<br>    "name": "Allow-Https-out-to-AzureCloud",<br>    "priority": 204,<br>    "protocol": "Tcp",<br>    "source_address_prefix": "*",<br>    "source_port_range": "*"<br>  },<br>  "Allow-Rdp-out-to-VirtualNetwork": {<br>    "access": "Allow",<br>    "description": "Allow RDP traffic to the VirtualNetwork",<br>    "destination_address_prefix": "VirtualNetwork",<br>    "destination_port_range": "3389",<br>    "direction": "Outbound",<br>    "name": "Allow-Rdp-out-to-VirtualNetwork",<br>    "priority": 200,<br>    "protocol": "Tcp",<br>    "source_address_prefix": "*",<br>    "source_port_range": "*"<br>  },<br>  "Allow-Ssh-out-to-VirtualNetwork": {<br>    "access": "Allow",<br>    "description": "Allow SSH traffic to the VirtualNetwork",<br>    "destination_address_prefix": "VirtualNetwork",<br>    "destination_port_range": "22",<br>    "direction": "Outbound",<br>    "name": "Allow-Ssh-out-to-VirtualNetwork",<br>    "priority": 201,<br>    "protocol": "Tcp",<br>    "source_address_prefix": "*",<br>    "source_port_range": "*"<br>  }<br>}</pre> | no |
| <a name="input_default_rules"></a> [default\_rules](#input\_default\_rules) | n/a | <pre>map(object({<br>    access                                     = string<br>    name                                       = string<br>    direction                                  = string<br>    priority                                   = number<br>    protocol                                   = string<br>    description                                = optional(string)<br>    destination_address_prefix                 = optional(string, null)<br>    destination_address_prefixes               = optional(set(string), null)<br>    destination_application_security_group_ids = optional(set(string), null)<br>    destination_port_range                     = optional(string, null)<br>    destination_port_ranges                    = optional(set(string), null)<br>    source_address_prefix                      = optional(string, null)<br>    source_address_prefixes                    = optional(set(string), null)<br>    source_application_security_group_ids      = optional(set(string), null)<br>    source_port_range                          = optional(string, null)<br>    source_port_ranges                         = optional(set(string), null)<br>    timeouts = optional(object({<br>      create = optional(string, "30")<br>      delete = optional(string, "30")<br>      read   = optional(string, "5")<br>      update = optional(string, "30")<br>    }))<br>  }))</pre> | <pre>{<br>  "Allow-Https-in-from-vnets": {<br>    "access": "Allow",<br>    "description": "Allow HTTPS traffic from VNets",<br>    "destination_address_prefix": "VirtualNetwork",<br>    "destination_port_range": "443",<br>    "direction": "Inbound",<br>    "name": "Allow-Https-in-from-vnets",<br>    "priority": 4095,<br>    "protocol": "Tcp",<br>    "source_address_prefix": "VirtualNetwork",<br>    "source_port_range": "*"<br>  },<br>  "Allow-Https-out-to-vnets": {<br>    "access": "Allow",<br>    "description": "Allow HTTPS traffic to VNets",<br>    "destination_address_prefix": "VirtualNetwork",<br>    "destination_port_range": "443",<br>    "direction": "Outbound",<br>    "name": "Allow-Https-out-to-vnets",<br>    "priority": 4095,<br>    "protocol": "Tcp",<br>    "source_address_prefix": "VirtualNetwork",<br>    "source_port_range": "*"<br>  },<br>  "Deny-Any-Any-Any-In": {<br>    "access": "Deny",<br>    "description": "Deny all inbound traffic",<br>    "destination_address_prefix": "*",<br>    "destination_port_range": "*",<br>    "direction": "Inbound",<br>    "name": "Deny-Any-Any-Any-In",<br>    "priority": 4096,<br>    "protocol": "*",<br>    "source_address_prefix": "*",<br>    "source_port_range": "*"<br>  },<br>  "Deny-Any-Any-Any-Out": {<br>    "access": "Deny",<br>    "description": "Deny all outbound traffic",<br>    "destination_address_prefix": "*",<br>    "destination_port_range": "*",<br>    "direction": "Outbound",<br>    "name": "Deny-Any-Any-Any-Out",<br>    "priority": 4096,<br>    "protocol": "*",<br>    "source_address_prefix": "*",<br>    "source_port_range": "*"<br>  }<br>}</pre> | no |
| <a name="input_natgateway"></a> [natgateway](#input\_natgateway) | This object describes the public IP configuration when creating Nat Gateway's with a public IP.  If creating more than one public IP, then these values will be used for all public IPs.<br><br>- `allocation_method`       = (Required) - Defines the allocation method for this IP address. Possible values are Static or Dynamic.<br>- `ddos_protection_mode`    = (Optional) - The DDoS protection mode of the public IP. Possible values are Disabled, Enabled, and VirtualNetworkInherited. Defaults to VirtualNetworkInherited.<br>- `ddos_protection_plan_id` = (Optional) - The ID of DDoS protection plan associated with the public IP. ddos\_protection\_plan\_id can only be set when ddos\_protection\_mode is Enabled<br>- `domain_name_label`       = (Optional) - Label for the Domain Name. Will be used to make up the FQDN. If a domain name label is specified, an A DNS record is created for the public IP in the Microsoft Azure DNS system.<br>- `idle_timeout_in_minutes` = (Optional) - Specifies the timeout for the TCP idle connection. The value can be set between 4 and 30 minutes.<br>- `inherit_tags`            = (Optional) - Defaults to false.  Set this to false if only the tags defined on this resource should be applied. - Future functionality leaving in.<br>- `ip_version`              = (Optional) - The IP Version to use, IPv6 or IPv4. Changing this forces a new resource to be created. Only static IP address allocation is supported for IPv6.<br>- `lock_level`              = (Optional) - Set this value to override the resource level lock value.  Possible values are `None`, `CanNotDelete`, and `ReadOnly`.<br>- `name`                    = (Optional) - The name of the Nat gateway. Changing this forces a new resource to be created.<br>- `sku`                     = (Optional) - The SKU of the Public IP. Accepted values are Basic and Standard. Defaults to Standard to support zones by default. Changing this forces a new resource to be created. When sku\_tier is set to Global, sku must be set to Standard.<br>- `sku_tier`                = (Optional) - The SKU tier of the Public IP. Accepted values are Global and Regional. Defaults to Regional<br>- `zones`                   = (Optional) - A list of zones where this public IP should be deployed. Defaults to no zone. if you prefer, you can set other values for the zones ["1","2","3"]. Changing this forces a new resource to be created.<br><br>  Example Inputs:<pre>hcl<br>  natgateway = {<br>    name = "my-nat-gw"<br>  }</pre>hcl | <pre>object({<br>    allocation_method       = optional(string, "Static")<br>    ddos_protection_mode    = optional(string, "VirtualNetworkInherited")<br>    ddos_protection_plan_id = optional(string, null)<br>    domain_name_label       = optional(string, null)<br>    idle_timeout_in_minutes = optional(number, 4)<br>    inherit_tags            = optional(bool, true)<br>    ip_version              = optional(string, "IPv4")<br>    lock_level              = optional(string, null)<br>    name                    = optional(string, null)<br>    sku                     = optional(string, "Standard")<br>    sku_tier                = optional(string, "Regional")<br>    zones                   = optional(list(string))<br>  })</pre> | `null` | no |
| <a name="input_private_dns"></a> [private\_dns](#input\_private\_dns) | The name of the private DNS zone. | <pre>map(object({<br>    zone_name           = string<br>    zone_link_enabled   = optional(bool, true)<br>    zone_link_name      = optional(string)<br>    resource_group_name = optional(string)<br>  }))</pre> | `null` | no |
| <a name="input_public_ip"></a> [public\_ip](#input\_public\_ip) | The name of the public IP. | <pre>object({<br>    allocation_method = optional(string, "Static")<br>    ip_version        = optional(string, "IPv4")<br>    name              = optional(string, null)<br>    sku               = optional(string, "Standard")<br>    sku_tier          = optional(string, "Regional")<br>    zones             = optional(list(string))<br>  })</pre> | `{}` | no |
| <a name="input_resource_group"></a> [resource\_group](#input\_resource\_group) | The name of the resource group in which to create the resources. | <pre>object({<br>    name     = string<br>    location = string<br>  })</pre> | <pre>{<br>  "location": null,<br>  "name": null<br>}</pre> | no |
| <a name="input_security_rules"></a> [security\_rules](#input\_security\_rules) | A map of security rules to be created in every Network Security Group. The key of the map is the name of the security rule. The value of the map is a map with the following keys.<br><br>  - `access` - (Required) Specifies whether network traffic is allowed or denied. Possible values are `Allow` and `Deny`.<br>  - `name` - (Required) Name of the network security rule to be created.<br>  - `description` - (Optional) A description for this rule. Restricted to 140 characters.<br>  - `destination_address_prefix` - (Optional) CIDR or destination IP range or * to match any IP. Tags such as `VirtualNetwork`, `AzureLoadBalancer` and `Internet` can also be used. Besides, it also supports all available Service Tags like ‘Sql.WestEurope‘, ‘Storage.EastUS‘, etc. You can list the available service tags with the CLI:<pre>shell az network list-service-tags --location westcentralus</pre>. For further information please see [Azure CLI<br>  - `destination_address_prefixes` - (Optional) List of destination address prefixes. Tags may not be used. This is required if `destination_address_prefix` is not specified.<br>  - `destination_application_security_group_ids` - (Optional) A List of destination Application Security Group IDs<br>  - `destination_port_range` - (Optional) Destination Port or Range. Integer or range between `0` and `65535` or `*` to match any. This is required if `destination_port_ranges` is not specified.<br>  - `destination_port_ranges` - (Optional) List of destination ports or port ranges. This is required if `destination_port_range` is not specified.<br>  - `direction` - (Required) The direction specifies if rule will be evaluated on incoming or outgoing traffic. Possible values are `Inbound` and `Outbound`.<br>  - `name` - (Required) The name of the security rule. This needs to be unique across all Rules in the Network Security Group. Changing this forces a new resource to be created.<br>  - `priority` - (Required) Specifies the priority of the rule. The value can be between 100 and 4096. The priority number must be unique for each rule in the collection. The lower the priority number, the higher the priority of the rule.<br>  - `protocol` - (Required) Network protocol this rule applies to. Possible values include `Tcp`, `Udp`, `Icmp`, `Esp`, `Ah` or `*` (which matches all).<br>  - `resource_group_name` - (Required) The name of the resource group in which to create the Network Security Rule. Changing this forces a new resource to be created.<br>  - `source_address_prefix` - (Optional) CIDR or source IP range or * to match any IP. Tags such as `VirtualNetwork`, `AzureLoadBalancer` and `Internet` can also be used. This is required if `source_address_prefixes` is not specified.<br>  - `source_address_prefixes` - (Optional) List of source address prefixes. Tags may not be used. This is required if `source_address_prefix` is not specified.<br>  - `source_application_security_group_ids` - (Optional) A List of source Application Security Group IDs<br>  - `source_port_range` - (Optional) Source Port or Range. Integer or range between `0` and `65535` or `*` to match any. This is required if `source_port_ranges` is not specified.<br>  - `source_port_ranges` - (Optional) List of source ports or port ranges. This is required if `source_port_range` is not specified.<br><br>  ---<br>  `timeouts` block supports the following:<br>  - `create` - (Defaults to 30 minutes) Used when creating the Network Security Rule.<br>  - `delete` - (Defaults to 30 minutes) Used when deleting the Network Security Rule.<br>  - `read` - (Defaults to 5 minutes) Used when retrieving the Network Security Rule.<br>  - `update` - (Defaults to 30 minutes) Used when updating the Network Security Rule. | <pre>map(object({<br>    access                                     = string<br>    name                                       = string<br>    description                                = optional(string)<br>    destination_address_prefix                 = optional(string)<br>    destination_address_prefixes               = optional(set(string))<br>    destination_application_security_group_ids = optional(set(string))<br>    destination_port_range                     = optional(string)<br>    destination_port_ranges                    = optional(set(string))<br>    direction                                  = string<br>    priority                                   = number<br>    protocol                                   = string<br>    source_address_prefix                      = optional(string)<br>    source_address_prefixes                    = optional(set(string))<br>    source_application_security_group_ids      = optional(set(string))<br>    source_port_range                          = optional(string)<br>    source_port_ranges                         = optional(set(string))<br>    timeouts = optional(object({<br>      create = optional(string)<br>      delete = optional(string)<br>      read   = optional(string)<br>      update = optional(string)<br>    }))<br>  }))</pre> | `{}` | no |
| <a name="input_subnets"></a> [subnets](#input\_subnets) | This object describes the subnets to create within the virtual network.<br><br>- `address_prefix`   = (Optional) - The address prefix to use for the subnet. Changing this forces a new resource to be created.<br>- `address_prefixes` = (Optional) - The address prefixes to use for the subnet. Changing this forces a new resource to be created.<br>- `name`             = (Optional) - The name of the subnet. Changing this forces a new resource to be created.<br>- `nat_gateway`      = (Optional) - The NAT Gateway to associate with the subnet. Changing this forces a new resource to be created.<br>- `network_security_group` = (Optional) - The Network Security Group to associate with the subnet. Changing this forces a new resource to be created.<br>- `private_endpoint_network_policies` = (Optional) - The network policies for private endpoints on the subnet. Possible values are Enabled and Disabled. Defaults to Enabled.<br>- `private_link_service_network_policies_enabled` = (Optional) - Enable or disable network policies for private link service on the subnet. Defaults to true.<br>- `route_table` = (Optional) - The Route Table to associate with the subnet. Changing this forces a new resource to be created.<br>- `service_endpoint_policies` = (Optional) - The service endpoint policies to associate with the subnet. Changing this forces a new resource to be created.<br>- `service_endpoints` = (Optional) - The service endpoints to associate with the subnet. Changing this forces a new resource to be created.<br>- `default_outbound_access_enabled` = (Optional) - Whether to allow outbound traffic from the subnet. Defaults to false.<br>- `sharing_scope` = (Optional) - The sharing scope of the subnet. Possible values are None, Shared, and Service. Defaults to None.<br>- `delegate_to` = (Optional) - The service to delegate to. Changing this forces a new resource to be created.<br>- `timeouts` = (Optional) - The timeouts for the subnet.<br>- `role_assignments` = (Optional) - The role assignments for the subnet.<br><br>  Example Inputs:<pre>hcl<br>  subnets = {<br>    "CoreSubnet" = {<br>      address_prefixes                = ["100.0.1.0/24"]<br>      default_outbound_access_enabled = false<br>      delegate_to                     = "Microsoft.ContainerInstance/containerGroups"<br>    }<br>  }</pre>hcl | <pre>map(object({<br>    address_prefix                  = optional(string)<br>    address_prefixes                = optional(list(string))<br>    default_outbound_access_enabled = optional(bool, false)<br>    delegate_to                     = optional(string, null)<br>    nat_gateway = optional(object({<br>      id = string<br>    }))<br>    name                          = optional(string)<br>    no_nsg_association            = optional(bool, false)<br>    create_network_security_group = optional(bool, false)<br>    network_security_group_config = optional(object({<br>      azure_default = optional(bool, false)<br>    }), null)<br>    network_security_group_id                     = optional(string, null)<br>    private_endpoint_network_policies             = optional(string, "Enabled")<br>    private_link_service_network_policies_enabled = optional(bool, true)<br>    role_assignments = optional(map(object({<br>      role_definition_id_or_name             = string<br>      principal_id                           = string<br>      description                            = optional(string, null)<br>      skip_service_principal_aad_check       = optional(bool, false)<br>      condition                              = optional(string, null)<br>      condition_version                      = optional(string, null)<br>      delegated_managed_identity_resource_id = optional(string, null)<br>      principal_type                         = optional(string, null)<br>    })))<br>    route_table = optional(object({<br>      id = string<br>    }))<br>    service_endpoint_policies = optional(map(object({<br>      id = string<br>    })))<br>    service_endpoints = optional(set(string))<br>    sharing_scope     = optional(string, null)<br>    timeouts = optional(object({<br>      create = optional(string)<br>      delete = optional(string)<br>      read   = optional(string)<br>      update = optional(string)<br>    }))<br>  }))</pre> | `{}` | no |
| <a name="input_tags"></a> [tags](#input\_tags) | A map of tags to assign to the resource. | `map(string)` | `{}` | no |
| <a name="input_vnet_address_space"></a> [vnet\_address\_space](#input\_vnet\_address\_space) | The address space that is used by the virtual network. | `list(string)` | <pre>[<br>  "10.0.0.0/16"<br>]</pre> | no |
| <a name="input_vnet_dns_servers"></a> [vnet\_dns\_servers](#input\_vnet\_dns\_servers) | The DNS servers to be used by the virtual network. | `list(string)` | `[]` | no |

## Outputs

| Name | Description |
|------|-------------|
| <a name="output_all_network_security_groups"></a> [all\_network\_security\_groups](#output\_all\_network\_security\_groups) | A map of all network security groups created keyed by subnet |
| <a name="output_all_subnets"></a> [all\_subnets](#output\_all\_subnets) | A list of all subnets created |
| <a name="output_id"></a> [id](#output\_id) | The ID of the virtual network |
| <a name="output_name"></a> [name](#output\_name) | The name of the virtual network |
| <a name="output_private_dns_zone_list"></a> [private\_dns\_zone\_list](#output\_private\_dns\_zone\_list) | A map of private DNS zone names to their corresponding names and IDs |
| <a name="output_resource_group"></a> [resource\_group](#output\_resource\_group) | The resource group in which the virtual network is created |
| <a name="output_subnet_list"></a> [subnet\_list](#output\_subnet\_list) | A map of subnet names to their corresponding names and IDs |
| <a name="output_subnets_with_default_nsg"></a> [subnets\_with\_default\_nsg](#output\_subnets\_with\_default\_nsg) | n/a |
| <a name="output_subnets_with_nsg"></a> [subnets\_with\_nsg](#output\_subnets\_with\_nsg) | n/a |
| <a name="output_subnets_with_nsg_azure_default"></a> [subnets\_with\_nsg\_azure\_default](#output\_subnets\_with\_nsg\_azure\_default) | n/a |
<!-- END_TF_DOCS -->

## License

**Copyright:** Schuberg Philis

```text
Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

    http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
```
